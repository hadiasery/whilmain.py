import streamlit as st
import pandas as pd
import time
import random

# 1. ุฅุนุฏุงุฏ ุงูุตูุญุฉ ูุซุจุงุช ุงููุญุชูู
st.set_page_config(page_title="ุฑุงุฏุงุฑ ูุงุฏู - ุงูุซุจุงุช ุงูุนุงูู", layout="wide")

st.title("๐น ุฑุงุฏุงุฑ ูุงุฏู - ูุธุงู ุงูุชุญุฏูุซ ุงูุซุงุจุช")
st.success("โ ุงูุชุญุฏูุซ ูุชู ุงูุขู ุฏุงุฎู ุงูุฌุฏูู (ุจุฏูู ูููุถ ุฃู ุงุฎุชูุงุก)")

# 2. ุงููุงุฆูุฉ ุงูุดุฑุนูุฉ ูุงูููุฒุงููุฉ ุงููุญุฏุฏุฉ
clean_list = ['MARA', 'RIOT', 'PLTR', 'F', 'CLOV', 'NIO', 'AAL', 'GRWG', 'AMC']

# 3. ุฅูุดุงุก "ุญุงููุฉ" ุซุงุจุชุฉ ููุฌุฏูู
# ูุฐู ุงูุญุงููุฉ ุชููุน ุงูุฌุฏูู ูู ุงูุงุฎุชูุงุก ุฃุซูุงุก ุงูุชุญุฏูุซ
table_placeholder = st.empty()

def get_live_data():
    results = []
    for symbol in clean_list:
        # ูุญุงูุงุฉ ุฐููุฉ ููุจูุงูุงุช ูุถูุงู ุณุฑุนุฉ ุงูุชุญุฏูุซ ูุนุฏู ุงูุชุนููู
        vol_strength = random.randint(90, 260)
        status = "๐ ุญูุช ููุชุดู" if vol_strength > 190 else "๐ ูุฑุงูุจุฉ"
        direction = "CALL ๐ข" if random.random() > 0.5 else "PUT ๐ด"
        
        # ุงูุฃุณุนุงุฑ ุงูุชูุฑูุจูุฉ ุงูุญุงููุฉ (ุชุชุญุฑู ุจุดูู ุทููู ูููุญุงูุงุฉ)
        prices = {'MARA': 15.4, 'RIOT': 10.2, 'PLTR': 24.5, 'F': 12.1, 'CLOV': 2.8, 'NIO': 7.5, 'AAL': 14.2, 'GRWG': 3.1, 'AMC': 4.5}
        current_price = round(prices.get(symbol, 10.0) + random.uniform(-0.05, 0.05), 2)

        results.append({
            "ุงูุดุฑูุฉ": symbol,
            "ุงูุณุนุฑ": f"${current_price}",
            "ููุฉ ุงูุณูููุฉ": f"{vol_strength}%",
            "ุงูุญุงูุฉ": status,
            "ุงูุชูุตูุฉ": direction,
            "ุงูููุฒุงููุฉ": "โ ูุชุงุญ ุจู 25$"
        })
    return pd.DataFrame(results)

# --- ูุญุฑู ุงูุชุญุฏูุซ ุงูุฏุงุฎูู ุงูุซุงุจุช ---
while True:
    # ุฌูุจ ุงูุจูุงูุงุช ุงูุฌุฏูุฏุฉ
    df = get_live_data()
    
    # ุชุญุฏูุซ ูุญุชูู ุงูุญุงููุฉ ููุท ุฏูู ุฅุนุงุฏุฉ ุชุญููู ุงูุตูุญุฉ
    with table_placeholder.container():
        st.write(f"โฑ๏ธ **ุชูููุช ุงูุชุญุฏูุซ ุงููุญุธู:** {time.strftime('%H:%M:%S')}")
        
        # ุงุณุชุฎุฏุงู ุณุชุงูู ูุฌุนู ุงูุฌุฏูู ูููุฃ ุงูุดุงุดุฉ ููููู ูุงุถุญุงู
        st.dataframe(df.style.applymap(
            lambda x: 'background-color: #2ecc71; color: white' if x == '๐ ุญูุช ููุชุดู' else '',
            subset=['ุงูุญุงูุฉ']
        ), use_container_width=True)
        
        # ุชูุจูู ุงูุญูุชุงู ุงูุตูุชู (ุจุตุฑู ููุง)
        whales = df[df['ุงูุญุงูุฉ'] == "๐ ุญูุช ููุชุดู"]
        if not whales.empty:
            st.warning(f"๐ฏ ุชูุจูู: ูุดุงุท ุญูุชุงู ูู {', '.join(whales['ุงูุดุฑูุฉ'].tolist())}")

    # ุงูุงูุชุธุงุฑ ููุฏุฉ 3 ุซูุงูู ููุท ูุจู ุงูุชุญุฏูุซ ุงููุงุฏู
    time.sleep(3)
